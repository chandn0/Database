"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[853],{50853:function(e,t,n){n.r(t),n.d(t,{WalletConnectV1Adapter:function(){return ue}});var r=n(74165),a=n(15861),o=n(15671),i=n(43144),c=n(97326),s=n(11752),u=n(61120),l=n(60136),p=n(29388),h=n(4942),d=n(9547),f=n(24156),v=function(e){(0,l.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){return(0,o.Z)(this,n),t.call(this,{cryptoLib:f,connectorOpts:e,pushServerOpts:r})}return(0,i.Z)(n)}(d.Z),m=n(98737),y=n(61881),b=(n(30876),n(68041)),g=n(62891),O=n.n(g),E=(n(98689),n(63044)),w=n.n(E),k=n(21522),N=n.n(k);n(14681);function C(){}var Z="ACK";y.Duplex;function P(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout((function(){throw r}))}}function x(e){for(var t=e.length,n=new Array(t),r=0;r<t;r+=1)n[r]=e[r];return n}var D=function(e){(0,l.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"emit",value:function(e){var t="error"===e,n=this._events;if(void 0!==n)t=t&&void 0===n.error;else if(!t)return!1;for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];if(t){var i;if(a.length>0&&(i=a[0]),i instanceof Error)throw i;var c=new Error("Unhandled error.".concat(i?" (".concat(i.message,")"):""));throw c.context=i,c}var s=n[e];if(void 0===s)return!1;if("function"===typeof s)P(s,this,a);else for(var u=s.length,l=x(s),p=0;p<u;p+=1)P(l[p],this,a);return!0}}]),n}(b.EventEmitter);Error;var T=function(e){(0,l.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;(0,o.Z)(this,n);var a=e.parent,i=e.name;return r=t.call(this,{objectMode:!0}),(0,h.Z)((0,c.Z)(r),"_parent",void 0),(0,h.Z)((0,c.Z)(r),"_name",void 0),r._parent=a,r._name=i,r}return(0,i.Z)(n,[{key:"_read",value:function(){}},{key:"_write",value:function(e,t,n){this._parent.push({name:this._name,data:e}),n()}}]),n}(y.Duplex);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=Symbol("IGNORE_SUBSTREAM");y.Duplex;var R=n(2583),S=n(62649),_=n.n(S);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y={EIP155:"eip155",SOLANA:"solana"},M=L(L({},Y),{},{MULTICHAIN:"multichain"}),B="776218ac4734478c90191dde8cae483c",H=function(e,t){var n=t?"number"===typeof t?t:parseInt(t,16):function(e){if(e===Y.EIP155)return 1;if(e===Y.SOLANA)return 1;throw new Error("Chain namespace ".concat(e," is not supported"))}(e);return e===Y.EIP155?function(e){var t=Y.EIP155;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://mainnet.infura.io/v3/".concat(B),displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://ropsten.infura.io/v3/".concat(B),displayName:"ropsten",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===e?{chainNamespace:t,chainId:"0x4",rpcTarget:"https://rinkeby.infura.io/v3/".concat(B),displayName:"rinkeby",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===e?{chainNamespace:t,chainId:"0x5",rpcTarget:"https://goerli.infura.io/v3/".concat(B),displayName:"goerli",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:42===e?{chainNamespace:t,chainId:"0x2a",rpcTarget:"https://kovan.infura.io/v3/".concat(B),displayName:"kovan",blockExplorer:"https://kovan.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===e?{chainNamespace:t,rpcTarget:"https://polygon-rpc.com",blockExplorer:"https://polygonscan.com",chainId:"0x89",displayName:"Polygon Mainnet",ticker:"matic",tickerName:"matic"}:80001===e?{chainNamespace:t,rpcTarget:"https://rpc-mumbai.maticvigil.com",blockExplorer:"https://mumbai-explorer.matic.today",chainId:"0x13881",displayName:"Polygon Mumbai Testnet",ticker:"matic",tickerName:"matic"}:56===e?{chainNamespace:t,rpcTarget:"https://bsc-dataseed.binance.org",blockExplorer:"https://bscscan.com",chainId:"0x38",displayName:"Binance SmartChain Mainnet",ticker:"BNB",tickerName:"BNB"}:97===e?{chainNamespace:t,rpcTarget:"https://data-seed-prebsc-2-s3.binance.org:8545",blockExplorer:"https://testnet.bscscan.com",chainId:"0x61",displayName:"Binance SmartChain Testnet",ticker:"BNB",tickerName:"BNB"}:null}(n):e===Y.SOLANA?function(e){var t=Y.SOLANA;return 1===e?{chainNamespace:t,blockExplorer:"https://explorer.solana.com",chainId:"0x1",displayName:"Solana Mainnet",rpcTarget:"https://api.mainnet-beta.solana.com",ticker:"SOL",tickerName:"Solana Token"}:2===e?{rpcTarget:"https://api.testnet.solana.com",blockExplorer:"https://explorer.solana.com?cluster=testnet",chainId:"0x2",chainNamespace:t,displayName:"testnet",ticker:"SOL",tickerName:"solana"}:3===e?{rpcTarget:"https://api.devnet.solana.com",blockExplorer:"https://explorer.solana.com?cluster=devnet",chainId:"0x3",chainNamespace:t,displayName:"devnet",ticker:"SOL",tickerName:"solana"}:null}(n):null},V=function(e){(0,l.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var a;return(0,o.Z)(this,n),a=t.call(this,r),(0,h.Z)((0,c.Z)(a),"code",void 0),(0,h.Z)((0,c.Z)(a),"message",void 0),a.code=e,a.message=r||"",Object.defineProperty((0,c.Z)(a),"name",{value:"Web3AuthError"}),a}return(0,i.Z)(n,[{key:"toJSON",value:function(){return{name:this.name,code:this.code,message:this.message}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),n}(R.s),U=function(e){(0,l.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var a;return(0,o.Z)(this,n),a=t.call(this,e,r),Object.defineProperty((0,c.Z)(a),"name",{value:"WalletInitializationError"}),a}return(0,i.Z)(n,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new n(e,"".concat(n.messages[e],", ").concat(t))}},{key:"notFound",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5001,e)}},{key:"notInstalled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5002,e)}},{key:"notReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5003,e)}},{key:"windowBlocked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5004,e)}},{key:"windowClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5005,e)}},{key:"incompatibleChainNameSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5006,e)}},{key:"duplicateAdapterError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5007,e)}},{key:"invalidProviderConfigError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5008,e)}},{key:"providerNotReadyError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5009,e)}},{key:"rpcConnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5010,e)}},{key:"invalidParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5011,e)}},{key:"invalidNetwork",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5013,e)}}]),n}(V);(0,h.Z)(U,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});var q=function(e){(0,l.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var a;return(0,o.Z)(this,n),a=t.call(this,e,r),Object.defineProperty((0,c.Z)(a),"name",{value:"WalletLoginError"}),a}return(0,i.Z)(n,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new n(e,"".concat(n.messages[e]).concat(t))}},{key:"connectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5111,e)}},{key:"disconnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5112,e)}},{key:"notConnectedError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5113,e)}},{key:"popupClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5114,e)}}]),n}(V);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,h.Z)(q,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});var z={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},J=F({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom"},z),K=F({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},z),Q=F(F({},K),J);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee="external",te={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},ne=$($({},te),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"}),re=function(e){(0,l.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,o.Z)(this,n),e=t.apply(this,arguments),(0,h.Z)((0,c.Z)(e),"adapterData",{}),(0,h.Z)((0,c.Z)(e),"chainConfig",null),e}return(0,i.Z)(n,[{key:"chainConfigProxy",get:function(){return this.chainConfig?$({},this.chainConfig):null}},{key:"setChainConfig",value:function(e){if(this.status!==te.READY){if(!e.chainNamespace)throw U.notReady("ChainNamespace is required while setting chainConfig");var t=H(e.chainNamespace,e.chainId);this.chainConfig=$($({},t),e)}}},{key:"setAdapterSettings",value:function(e){}},{key:"checkConnectionRequirements",value:function(){if(this.name!==Q.WALLET_CONNECT_V1||this.status!==te.CONNECTING){if(this.status===te.CONNECTING)throw U.notReady("Already connecting");if(this.status===te.CONNECTED)throw q.connectionError("Already connected");if(this.status!==te.READY)throw q.connectionError("Wallet adapter is not ready yet")}}},{key:"checkInitializationRequirements",value:function(){if(this.status!==te.NOT_READY){if(this.status===te.CONNECTED)throw U.notReady("Already connected");if(this.status===te.READY)throw U.notReady("Adapter is already initialized")}}},{key:"updateAdapterData",value:function(e){this.adapterData=e,this.emit(ne.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}]),n}(D),ae=_().getLogger("web3auth-logger");var oe=n(14865),ie=[{name:"Rainbow",chains:[Y.EIP155],logo:"https://images.web3auth.io/login-rainbow.svg",mobile:{native:"rainbow:",universal:"https://rnbwapp.com"},desktop:{native:"",universal:""}}];function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=function(e){(0,l.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,o.Z)(this,n);var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=t.call(this),(0,h.Z)((0,c.Z)(e),"name",Q.WALLET_CONNECT_V1),(0,h.Z)((0,c.Z)(e),"adapterNamespace",M.EIP155),(0,h.Z)((0,c.Z)(e),"currentChainNamespace",Y.EIP155),(0,h.Z)((0,c.Z)(e),"type",ee),(0,h.Z)((0,c.Z)(e),"adapterOptions",void 0),(0,h.Z)((0,c.Z)(e),"status",te.NOT_READY),(0,h.Z)((0,c.Z)(e),"adapterData",{uri:"",extensionAdapters:ie}),(0,h.Z)((0,c.Z)(e),"connector",null),(0,h.Z)((0,c.Z)(e),"wcProvider",null),(0,h.Z)((0,c.Z)(e),"rehydrated",!1),e.adapterOptions=se({},r),e.chainConfig=r.chainConfig||null,e}return(0,i.Z)(n,[{key:"connected",get:function(){var e;return!(null===(e=this.connector)||void 0===e||!e.connected)}},{key:"provider",get:function(){var e;return(null===(e=this.wcProvider)||void 0===e?void 0:e.provider)||null},set:function(e){throw new Error("Not implemented")}},{key:"init",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.Z)((0,u.Z)(n.prototype),"checkInitializationRequirements",this).call(this),this.chainConfig||(this.chainConfig=H(Y.EIP155,1)),this.connector=this.getWalletConnectInstance(),this.wcProvider=new oe.WalletConnectProvider({config:{chainConfig:this.chainConfig},connector:this.connector}),this.emit(ne.READY,Q.WALLET_CONNECT_V1),this.status=te.READY,!this.connector.connected){e.next=10;break}return this.rehydrated=!0,e.next=10,this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,o=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.Z)((0,u.Z)(n.prototype),"checkConnectionRequirements",this).call(this),this.connector){e.next=3;break}throw U.notReady("Wallet adapter is not ready yet");case 3:if(!this.connected){e.next=7;break}return e.next=6,this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId});case 6:return e.abrupt("return",this.provider);case 7:if(this.status===te.CONNECTING){e.next=13;break}return null!==(t=this.adapterOptions.adapterSettings)&&void 0!==t&&t.qrcodeModal&&(this.connector=this.getWalletConnectInstance()),e.next=11,this.createNewSession();case 11:this.status=te.CONNECTING,this.emit(ne.CONNECTING,{adapter:Q.WALLET_CONNECT_V1});case 13:return e.abrupt("return",new Promise((function(e,t){if(!o.connector)return t(U.notReady("Wallet adapter is not ready yet"));o.connector.on("modal_closed",(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.status=te.READY,o.emit(ne.READY,Q.WALLET_CONNECT_V1),e.abrupt("return",t(new Error("User closed modal")));case 3:case"end":return e.stop()}}),e)}))));try{o.connector.on("connect",function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n&&o.emit(ne.ERRORED,n),t.next=3,o.onConnectHandler(a.params[0]);case 3:return t.abrupt("return",e(o.provider));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}catch(n){ae.error("Wallet connect v1 adapter error while connecting",n),o.status=te.READY,o.rehydrated=!0,o.emit(ne.ERRORED,n),t(n instanceof V?n:q.connectionError("Failed to login with wallet connect: ".concat((null===n||void 0===n?void 0:n.message)||"")))}})));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connected){e.next=2;break}throw q.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{cleanup:!1},n=t.cleanup,this.connector&&this.connected){e.next=4;break}throw q.notConnectedError("Not connected with wallet");case 4:return e.next=6,this.connector.killSession();case 6:this.rehydrated=!1,n?(this.connector=null,this.status=te.NOT_READY,this.wcProvider=null):this.status=te.READY,this.emit(ne.DISCONNECTED);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createNewSession",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,o,i,c=this,s=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=s.length>0&&void 0!==s[0]?s[0]:{forceNewSession:!1},this.connector){e.next=3;break}throw U.notReady("Wallet adapter is not ready yet");case 3:if(!o.forceNewSession||!this.connector.pending){e.next=6;break}return e.next=6,this.connector.killSession();case 6:if(null===(t=this.adapterOptions)||void 0===t||null===(n=t.adapterSettings)||void 0===n||!n.qrcodeModal){e.next=10;break}return e.next=9,this.connector.createSession({chainId:parseInt((null===(i=this.chainConfig)||void 0===i?void 0:i.chainId)||"0x1",16)});case 9:return e.abrupt("return");case 10:return e.abrupt("return",new Promise((function(e,t){var n;if(!c.connector)return t(U.notReady("Wallet adapter is not ready yet"));ae.debug("creating new session for web3auth wallet connect"),c.connector.on("display_uri",function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a,o){var i,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a){n.next=3;break}return c.emit(ne.ERRORED,q.connectionError("Failed to display wallet connect qr code")),n.abrupt("return",t(a));case 3:return s=o.params[0],c.updateAdapterData({uri:s,extensionAdapters:ie}),null===(i=c.connector)||void 0===i||i.off("display_uri"),n.abrupt("return",e());case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),c.connector.createSession({chainId:parseInt((null===(n=c.chainConfig)||void 0===n?void 0:n.chainId)||"0x1",16)}).catch((function(e){return ae.error("error while creating new wallet connect session",e),c.emit(ne.ERRORED,e),t(e)}))})));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onConnectHandler",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connector&&this.wcProvider){e.next=2;break}throw U.notReady("Wallet adapter is not ready yet");case 2:if(this.chainConfig){e.next=4;break}throw U.invalidParams("Chain config is not set");case 4:if(n=t.chainId,ae.debug("connected chainId in hex",n),n===parseInt(this.chainConfig.chainId,16)){e.next=22;break}return e.prev=7,e.next=10,this.wcProvider.switchChain({chainId:this.chainConfig.chainId,lookup:!1});case 10:e.next=22;break;case 12:return e.prev=12,e.t0=e.catch(7),ae.error(e.t0),e.next=17,this.createNewSession({forceNewSession:!0});case 17:return a=H(Y.EIP155,n),this.emit(ne.ERRORED,U.fromCode(5e3,"Not connected to correct network. Expected: ".concat(this.chainConfig.displayName,", Current: ").concat((null===a||void 0===a?void 0:a.displayName)||n,", Please switch to correct network from wallet"))),this.status=te.READY,this.rehydrated=!0,e.abrupt("return");case 22:return e.next=24,this.wcProvider.setupProvider(this.connector);case 24:this.subscribeEvents(this.connector),this.status=te.CONNECTED,this.emit(ne.CONNECTED,{adapter:Q.WALLET_CONNECT_V1,reconnected:this.rehydrated});case 27:case"end":return e.stop()}}),e,this,[[7,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribeEvents",value:function(e){var t=this;e.on("session_update",function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&t.emit(ne.ERRORED,n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"getWalletConnectInstance",value:function(){var e=this.adapterOptions.adapterSettings||{};return e.bridge=e.bridge||"https://bridge.walletconnect.org",new v(e)}}]),n}(re)}}]);