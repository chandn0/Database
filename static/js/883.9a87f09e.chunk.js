"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[883],{82883:function(e,t,n){n.r(t),n.d(t,{PhantomAdapter:function(){return oe}});var r=n(15671),a=n(43144),o=n(97326),i=n(11752),c=n(61120),s=n(60136),u=n(29388),l=n(74165),h=n(15861),p=n(4942),d=n(98737),f=n(61881),v=(n(30876),n(68041)),m=n(62891),y=n.n(m),w=(n(98689),n(63044)),O=n.n(w),b=n(21522),g=n.n(b);n(14681);function E(){}var k="ACK";f.Duplex;function N(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout((function(){throw r}))}}function C(e){for(var t=e.length,n=new Array(t),r=0;r<t;r+=1)n[r]=e[r];return n}var Z=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"emit",value:function(e){var t="error"===e,n=this._events;if(void 0!==n)t=t&&void 0===n.error;else if(!t)return!1;for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];if(t){var i;if(a.length>0&&(i=a[0]),i instanceof Error)throw i;var c=new Error("Unhandled error.".concat(i?" (".concat(i.message,")"):""));throw c.context=i,c}var s=n[e];if(void 0===s)return!1;if("function"===typeof s)N(s,this,a);else for(var u=s.length,l=C(s),h=0;h<u;h+=1)N(l[h],this,a);return!0}}]),n}(v.EventEmitter);Error;var P=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e){var a;(0,r.Z)(this,n);var i=e.parent,c=e.name;return a=t.call(this,{objectMode:!0}),(0,p.Z)((0,o.Z)(a),"_parent",void 0),(0,p.Z)((0,o.Z)(a),"_name",void 0),a._parent=i,a._name=c,a}return(0,a.Z)(n,[{key:"_read",value:function(){}},{key:"_write",value:function(e,t,n){this._parent.push({name:this._name,data:e}),n()}}]),n}(f.Duplex);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=Symbol("IGNORE_SUBSTREAM");f.Duplex;var T=n(2583),_=n(62649),j=n.n(_);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={EIP155:"eip155",SOLANA:"solana"},L=R(R({},S),{},{MULTICHAIN:"multichain"}),W="776218ac4734478c90191dde8cae483c",M=function(e,t){var n=t?"number"===typeof t?t:parseInt(t,16):function(e){if(e===S.EIP155)return 1;if(e===S.SOLANA)return 1;throw new Error("Chain namespace ".concat(e," is not supported"))}(e);return e===S.EIP155?function(e){var t=S.EIP155;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://mainnet.infura.io/v3/".concat(W),displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://ropsten.infura.io/v3/".concat(W),displayName:"ropsten",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===e?{chainNamespace:t,chainId:"0x4",rpcTarget:"https://rinkeby.infura.io/v3/".concat(W),displayName:"rinkeby",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===e?{chainNamespace:t,chainId:"0x5",rpcTarget:"https://goerli.infura.io/v3/".concat(W),displayName:"goerli",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:42===e?{chainNamespace:t,chainId:"0x2a",rpcTarget:"https://kovan.infura.io/v3/".concat(W),displayName:"kovan",blockExplorer:"https://kovan.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===e?{chainNamespace:t,rpcTarget:"https://polygon-rpc.com",blockExplorer:"https://polygonscan.com",chainId:"0x89",displayName:"Polygon Mainnet",ticker:"matic",tickerName:"matic"}:80001===e?{chainNamespace:t,rpcTarget:"https://rpc-mumbai.maticvigil.com",blockExplorer:"https://mumbai-explorer.matic.today",chainId:"0x13881",displayName:"Polygon Mumbai Testnet",ticker:"matic",tickerName:"matic"}:56===e?{chainNamespace:t,rpcTarget:"https://bsc-dataseed.binance.org",blockExplorer:"https://bscscan.com",chainId:"0x38",displayName:"Binance SmartChain Mainnet",ticker:"BNB",tickerName:"BNB"}:97===e?{chainNamespace:t,rpcTarget:"https://data-seed-prebsc-2-s3.binance.org:8545",blockExplorer:"https://testnet.bscscan.com",chainId:"0x61",displayName:"Binance SmartChain Testnet",ticker:"BNB",tickerName:"BNB"}:null}(n):e===S.SOLANA?function(e){var t=S.SOLANA;return 1===e?{chainNamespace:t,blockExplorer:"https://explorer.solana.com",chainId:"0x1",displayName:"Solana Mainnet",rpcTarget:"https://api.mainnet-beta.solana.com",ticker:"SOL",tickerName:"Solana Token"}:2===e?{rpcTarget:"https://api.testnet.solana.com",blockExplorer:"https://explorer.solana.com?cluster=testnet",chainId:"0x2",chainNamespace:t,displayName:"testnet",ticker:"SOL",tickerName:"solana"}:3===e?{rpcTarget:"https://api.devnet.solana.com",blockExplorer:"https://explorer.solana.com?cluster=devnet",chainId:"0x3",chainNamespace:t,displayName:"devnet",ticker:"SOL",tickerName:"solana"}:null}(n):null},B=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,a){var i;return(0,r.Z)(this,n),i=t.call(this,a),(0,p.Z)((0,o.Z)(i),"code",void 0),(0,p.Z)((0,o.Z)(i),"message",void 0),i.code=e,i.message=a||"",Object.defineProperty((0,o.Z)(i),"name",{value:"Web3AuthError"}),i}return(0,a.Z)(n,[{key:"toJSON",value:function(){return{name:this.name,code:this.code,message:this.message}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),n}(T.s),Y=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,a){var i;return(0,r.Z)(this,n),i=t.call(this,e,a),Object.defineProperty((0,o.Z)(i),"name",{value:"WalletInitializationError"}),i}return(0,a.Z)(n,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new n(e,"".concat(n.messages[e],", ").concat(t))}},{key:"notFound",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5001,e)}},{key:"notInstalled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5002,e)}},{key:"notReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5003,e)}},{key:"windowBlocked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5004,e)}},{key:"windowClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5005,e)}},{key:"incompatibleChainNameSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5006,e)}},{key:"duplicateAdapterError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5007,e)}},{key:"invalidProviderConfigError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5008,e)}},{key:"providerNotReadyError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5009,e)}},{key:"rpcConnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5010,e)}},{key:"invalidParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5011,e)}},{key:"invalidNetwork",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5013,e)}}]),n}(B);(0,p.Z)(Y,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});var H=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e,a){var i;return(0,r.Z)(this,n),i=t.call(this,e,a),Object.defineProperty((0,o.Z)(i),"name",{value:"WalletLoginError"}),i}return(0,a.Z)(n,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new n(e,"".concat(n.messages[e]).concat(t))}},{key:"connectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5111,e)}},{key:"disconnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5112,e)}},{key:"notConnectedError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5113,e)}},{key:"popupClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5114,e)}}]),n}(B);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,p.Z)(H,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});var q={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},F=G({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom"},q),z=G({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},q),V=G(G({},z),F);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q="external",X={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},$=K(K({},X),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"}),ee=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,r.Z)(this,n),e=t.apply(this,arguments),(0,p.Z)((0,o.Z)(e),"adapterData",{}),(0,p.Z)((0,o.Z)(e),"chainConfig",null),e}return(0,a.Z)(n,[{key:"chainConfigProxy",get:function(){return this.chainConfig?K({},this.chainConfig):null}},{key:"setChainConfig",value:function(e){if(this.status!==X.READY){if(!e.chainNamespace)throw Y.notReady("ChainNamespace is required while setting chainConfig");var t=M(e.chainNamespace,e.chainId);this.chainConfig=K(K({},t),e)}}},{key:"setAdapterSettings",value:function(e){}},{key:"checkConnectionRequirements",value:function(){if(this.name!==V.WALLET_CONNECT_V1||this.status!==X.CONNECTING){if(this.status===X.CONNECTING)throw Y.notReady("Already connecting");if(this.status===X.CONNECTED)throw H.connectionError("Already connected");if(this.status!==X.READY)throw H.connectionError("Wallet adapter is not ready yet")}}},{key:"checkInitializationRequirements",value:function(){if(this.status!==X.NOT_READY){if(this.status===X.CONNECTED)throw Y.notReady("Already connected");if(this.status===X.READY)throw Y.notReady("Adapter is already initialized")}}},{key:"updateAdapterData",value:function(e){this.adapterData=e,this.emit($.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}]),n}(Z),te=j().getLogger("web3auth-logger");var ne=n(8314);function re(e,t,n){return new Promise((function(r,a){n>0?setTimeout((0,h.Z)((0,l.Z)().mark((function o(){var i;return(0,l.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e();case 2:(i=o.sent)&&r(i),i||re(e,t,n-1).then((function(e){return r(e),e})).catch((function(e){return a(e)}));case 5:case"end":return o.stop()}}),o)}))),t):r(!1)}))}var ae=function(){var e=(0,h.Z)((0,l.Z)().mark((function e(){var t,n,r=arguments;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>0&&void 0!==r[0]?r[0]:{interval:1e3,count:3},!("undefined"!==typeof window&&!(null===(t=window.solana)||void 0===t||!t.isPhantom))){e.next=4;break}return e.abrupt("return",window.solana);case 4:return e.next=6,re((function(){var e;return null===(e=window.solana)||void 0===e?void 0:e.isPhantom}),n.interval,n.count);case 6:if(!e.sent){e.next=9;break}return e.abrupt("return",window.solana);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;(0,r.Z)(this,n);var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=t.call(this),(0,p.Z)((0,o.Z)(e),"name",V.PHANTOM),(0,p.Z)((0,o.Z)(e),"adapterNamespace",L.SOLANA),(0,p.Z)((0,o.Z)(e),"currentChainNamespace",S.SOLANA),(0,p.Z)((0,o.Z)(e),"type",Q),(0,p.Z)((0,o.Z)(e),"status",X.NOT_READY),(0,p.Z)((0,o.Z)(e),"_wallet",null),(0,p.Z)((0,o.Z)(e),"phantomProvider",null),(0,p.Z)((0,o.Z)(e),"rehydrated",!1),(0,p.Z)((0,o.Z)(e),"_onDisconnect",(function(){e._wallet&&(e._wallet.off("disconnect",e._onDisconnect),e.rehydrated=!1,e.status=e.status===X.CONNECTED?X.READY:X.NOT_READY,e.emit($.DISCONNECTED))})),e.chainConfig=a.chainConfig||null,e}return(0,a.Z)(n,[{key:"isWalletConnected",get:function(){var e;return!(null===(e=this._wallet)||void 0===e||!e.isConnected||this.status!==X.CONNECTED)}},{key:"provider",get:function(){var e;return(null===(e=this.phantomProvider)||void 0===e?void 0:e.provider)||null},set:function(e){throw new Error("Not implemented")}},{key:"setAdapterSettings",value:function(e){}},{key:"init",value:function(){var e=(0,h.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.Z)((0,c.Z)(n.prototype),"checkInitializationRequirements",this).call(this),this.chainConfig||(this.chainConfig=M(S.SOLANA,"0x1")),e.next=4,ae({interval:500,count:3});case 4:if(this._wallet=e.sent,this._wallet){e.next=7;break}throw Y.notInstalled();case 7:if(this.phantomProvider=new ne.PhantomInjectedProvider({config:{chainConfig:this.chainConfig}}),this.status=X.READY,this.emit($.READY,V.PHANTOM),e.prev=10,!t.autoConnect){e.next=15;break}return this.rehydrated=!0,e.next=15,this.connect();case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),te.error("Failed to connect with cached phantom provider",e.t0),this.emit("ERRORED",e.t0);case 21:case"end":return e.stop()}}),e,this,[[10,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=(0,h.Z)((0,l.Z)().mark((function e(){var t,r,a=this;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,e.prev=1,(0,i.Z)((0,c.Z)(n.prototype),"checkConnectionRequirements",this).call(this),this.status=X.CONNECTING,this.emit($.CONNECTING,{adapter:V.PHANTOM}),this._wallet){e.next=7;break}throw Y.notInstalled();case 7:if(this._wallet.isConnected){e.next=24;break}return r=this._wallet._handleDisconnect,e.prev=9,e.next=12,new Promise((function(e,n){var o=function(){var t=(0,h.Z)((0,l.Z)().mark((function t(){return(0,l.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.connectWithProvider(a._wallet);case 2:e(a.provider);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(!a._wallet)return n(Y.notInstalled());a._wallet.once("connect",o),a._wallet._handleDisconnect=function(){n(Y.windowClosed());for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return r.apply(t._wallet,a)},a._wallet.connect().catch((function(e){n(e)}))}));case 12:e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(9),!(e.t0 instanceof B)){e.next=18;break}throw e.t0;case 18:throw H.connectionError(null===e.t0||void 0===e.t0?void 0:e.t0.message);case 19:return e.prev=19,this._wallet._handleDisconnect=r,e.finish(19);case 22:e.next=26;break;case 24:return e.next=26,this.connectWithProvider(this._wallet);case 26:if(this._wallet.publicKey){e.next=28;break}throw H.connectionError();case 28:return this._wallet.on("disconnect",this._onDisconnect),e.abrupt("return",this.provider);case 32:throw e.prev=32,e.t1=e.catch(1),this.status=X.READY,this.rehydrated=!1,this.emit($.ERRORED,e.t1),e.t1;case 38:case"end":return e.stop()}}),e,this,[[1,32],[9,14,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,h.Z)((0,l.Z)().mark((function e(){var t,n,r=arguments;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{cleanup:!1},this.isWalletConnected){e.next=3;break}throw H.notConnectedError("Not connected with wallet");case 3:return e.prev=3,e.next=6,null===(n=this._wallet)||void 0===n?void 0:n.disconnect();case 6:t.cleanup&&(this.status=X.NOT_READY,this.phantomProvider=null,this._wallet=null),this.emit($.DISCONNECTED),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.emit($.ERRORED,H.disconnectionError(null===e.t0||void 0===e.t0?void 0:e.t0.message));case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=(0,h.Z)((0,l.Z)().mark((function e(){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isWalletConnected){e.next=2;break}throw H.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connectWithProvider",value:function(){var e=(0,h.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.phantomProvider){e.next=2;break}throw H.connectionError("No phantom provider");case 2:return e.next=4,this.phantomProvider.setupProvider(t);case 4:return this.status=X.CONNECTED,this.emit($.CONNECTED,{adapter:V.PHANTOM,reconnected:this.rehydrated}),e.abrupt("return",this.provider);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ee)}}]);